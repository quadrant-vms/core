apiVersion: v1
kind: Secret
metadata:
  name: postgres-secret
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "quadrant-vms.labels" . | nindent 4 }}
type: Opaque
stringData:
  username: {{ .Values.infrastructure.postgres.env.POSTGRES_USER }}
  password: {{ .Values.infrastructure.postgres.env.POSTGRES_PASSWORD }}
  database: {{ .Values.infrastructure.postgres.env.POSTGRES_DB }}
  database-url: "postgresql://{{ .Values.infrastructure.postgres.env.POSTGRES_USER }}:{{ .Values.infrastructure.postgres.env.POSTGRES_PASSWORD }}@postgres:5432/{{ .Values.infrastructure.postgres.env.POSTGRES_DB }}"
---
apiVersion: v1
kind: Secret
metadata:
  name: minio-secret
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "quadrant-vms.labels" . | nindent 4 }}
type: Opaque
stringData:
  access-key: {{ .Values.infrastructure.minio.env.MINIO_ROOT_USER }}
  secret-key: {{ .Values.infrastructure.minio.env.MINIO_ROOT_PASSWORD }}
---
apiVersion: v1
kind: Secret
metadata:
  name: auth-secret
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "quadrant-vms.labels" . | nindent 4 }}
type: Opaque
stringData:
  jwt-secret: {{ .Values.authService.env.JWT_SECRET }}
{{- if .Values.alertService.smtp.enabled }}
---
apiVersion: v1
kind: Secret
metadata:
  name: smtp-secret
  namespace: {{ .Values.global.namespace }}
  labels:
    {{- include "quadrant-vms.labels" . | nindent 4 }}
type: Opaque
stringData:
  smtp-username: {{ .Values.alertService.smtp.username }}
  smtp-password: {{ .Values.alertService.smtp.password }}
{{- end }}
